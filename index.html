<!doctype html>
<html lang="zh-CN">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>黄金盘前交易计划</title>
  <link rel="stylesheet" href="./assets/style.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.1/dist/chart.umd.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/html2pdf.js@0.10.1/dist/html2pdf.bundle.min.js"></script>
</head>
<body>
  <div class="container" id="appRoot">
    <div class="header">
      <div class="brand">
        <h1 id="hdrTitle">Gold Pre-market Plan</h1>
        <div class="meta">
          <span class="badge" id="hdrSymbol">SYMBOL: —</span>
          <span class="badge" id="hdrDate">DATE: —</span>
          <span class="badge" id="hdrUpdated">UPDATED: —</span>
        </div>
      </div>
      <button class="btn" id="btnExport">
        <span>导出 PDF</span>
        <span style="opacity:.6;font-size:12px">html2pdf</span>
      </button>
    </div>

    <div id="errBox" class="err" style="display:none;"></div>

    <div class="grid">
      <!-- LEFT -->
      <div>
        <div class="card">
          <h2>总体状态（红绿灯）</h2>
          <div class="traffic">
            <div class="light">
              <span class="dot neutral" id="tlDot"></span>
              <span style="font-weight:700" id="tlLabel">NEUTRAL</span>
            </div>
            <span class="badge">Traffic Light</span>
          </div>
          <div class="note" id="tlNote">—</div>
        </div>

        <div class="card">
          <h2>关键结论摘要</h2>
          <ul class="list" id="summaryList"></ul>
          <div id="summaryEmpty" style="display:none;opacity:.7">—</div>
        </div>

        <div class="card">
          <h2>盘前计划</h2>
          <div style="display:grid;grid-template-columns:1fr 1fr;gap:14px">
            <div>
              <div style="opacity:.7;font-size:12px">Base Case</div>
              <div class="note" id="planBase">—</div>
            </div>
            <div>
              <div style="opacity:.7;font-size:12px">Alternate Case</div>
              <div class="note" id="planAlt">—</div>
            </div>
          </div>

          <div style="margin-top:12px;opacity:.7;font-size:12px">Watchlist</div>
          <ul class="list" id="planWatch"></ul>
          <div id="planWatchEmpty" style="display:none;opacity:.7">—</div>

          <div style="margin-top:12px;opacity:.7;font-size:12px">Execution Rules</div>
          <ul class="list" id="planRules"></ul>
          <div id="planRulesEmpty" style="display:none;opacity:.7">—</div>
        </div>
      </div>

      <!-- RIGHT -->
      <div>
        <div class="card">
          <h2>结构雷达图（Snapshot）</h2>
          <div class="radar-wrap">
            <canvas id="radarChart"></canvas>
          </div>
        </div>

        <div class="card">
          <h2>最新行情（最近30天）</h2>
          <table class="table">
            <thead>
              <tr>
                <th style="width:22%;">Date</th>
                <th>Open</th><th>High</th><th>Low</th><th>Close</th><th>Volume</th>
              </tr>
            </thead>
            <tbody id="marketTbody"></tbody>
          </table>
          <div class="mini" id="marketEmpty" style="display:none;">—</div>
        </div>

        <div class="card">
          <h2>关键驱动因素</h2>
          <table class="table">
            <thead>
              <tr><th style="width:42%">Driver</th><th style="width:18%">Signal</th><th>Note</th></tr>
            </thead>
            <tbody id="driversTbody"></tbody>
          </table>
          <div id="driversEmpty" style="display:none;opacity:.7">—</div>
        </div>

        <div class="card">
          <h2>风险与应对</h2>
          <table class="table">
            <thead>
              <tr><th style="width:45%">Risk</th><th>Mitigation / Hedge</th></tr>
            </thead>
            <tbody id="risksTbody"></tbody>
          </table>
          <div id="risksEmpty" style="display:none;opacity:.7">—</div>
        </div>
      </div>
    </div>

    <div class="footer">
      <div class="card">
        <h2>数据来源与声明</h2>
        <ul class="list" id="srcList"></ul>
        <div id="srcEmpty" style="display:none;opacity:.7">—</div>
        <div class="note" id="disclaimer" style="margin-top:10px">—</div>
      </div>

      <div class="card">
        <h2>备注 / 链接</h2>
        <ul class="list" id="linksList"></ul>
        <div id="linksEmpty" style="display:none;opacity:.7">—</div>
        <div style="opacity:.7;font-size:12px;margin-top:12px">Debug</div>
        <div class="code" id="debugBox">gold_data.json</div>
      </div>
    </div>
  </div>

  <script src="./assets/app.js"></script>
</body>
</html>
